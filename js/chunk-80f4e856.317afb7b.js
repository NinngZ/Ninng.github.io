(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-80f4e856"],{"3e32":function(e,t,c){},a38c:function(e,t,c){"use strict";c.r(t);c("b0c0");var n=c("7a23"),a=Object(n["S"])("data-v-b13df42c");Object(n["B"])("data-v-b13df42c");var r={class:"create-order"},o=Object(n["h"])("订单预览"),i={class:"address-wrap"},s={class:"address"},d={class:"good"},l={class:"good-img"},b={alt:""},u={class:"good-desc"},O={class:"good-title"},j={class:"good-bth"},f={class:"price"},h=Object(n["i"])("small",null,"￥",-1),p=Object(n["h"])(" 商品金额 "),v=Object(n["h"])(" 支付宝二维码 "),g=Object(n["i"])("br",null,null,-1),m=Object(n["h"])(" 微信支付二维码 "),y=Object(n["i"])("br",null,null,-1);Object(n["z"])();var w=a((function(e,t,c,w,_,J){var C=Object(n["G"])("NavBar"),N=Object(n["G"])("van-icon"),k=Object(n["G"])("van-submit-bar"),G=Object(n["G"])("van-image"),I=Object(n["G"])("van-grid-item"),q=Object(n["G"])("van-grid"),L=Object(n["G"])("van-popup"),P=Object(n["H"])("lazy");return Object(n["y"])(),Object(n["f"])("div",r,[Object(n["i"])(C,{class:"nav-bar"},{default:a((function(){return[o]})),_:1}),Object(n["i"])("div",i,[Object(n["i"])("div",{class:"name",onClick:t[1]||(t[1]=function(){return w.goTo&&w.goTo.apply(w,arguments)})},[Object(n["i"])("span",null,Object(n["J"])(e.address.name),1),Object(n["i"])("span",null,Object(n["J"])(e.address.phone),1)]),Object(n["i"])("div",s,Object(n["J"])(e.address.province)+" "+Object(n["J"])(e.address.city)+" "+Object(n["J"])(e.address.county)+" "+Object(n["J"])(e.address.address),1),Object(n["i"])(N,{class:"arrow",name:"arrow"})]),Object(n["i"])("div",d,[(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["E"])(e.cartList,(function(e,t){return Object(n["y"])(),Object(n["f"])("div",{class:"good-item",key:t},[Object(n["i"])("div",l,[Object(n["Q"])(Object(n["i"])("img",b,null,512),[[P,e.goods.cover_url]])]),Object(n["i"])("div",u,[Object(n["i"])("div",O,[Object(n["i"])("span",null,Object(n["J"])(e.goods.title),1),Object(n["i"])("span",null,"x"+Object(n["J"])(e.num),1)]),Object(n["i"])("div",j,[Object(n["i"])("div",f,[h,Object(n["h"])(Object(n["J"])(e.goods.price),1)])])])])})),128))]),Object(n["i"])(k,{class:"submit-all",price:100*w.total,"button-text":"生成订单",onSubmit:w.handleCreateOrder},{default:a((function(){return[p]})),_:1},8,["price","onSubmit"]),Object(n["i"])(L,{closeable:"","close-on-click-overlay":!1,show:e.showPay,"onUpdate:show":t[2]||(t[2]=function(t){return e.showPay=t}),position:"bottom",style:{height:"40%"},onClose:w.close},{default:a((function(){return[Object(n["i"])(q,{border:!1,"column-num":2},{default:a((function(){return[Object(n["i"])(I,null,{default:a((function(){return[v,g,Object(n["i"])(G,{width:"150",height:"150",src:e.aliyun},null,8,["src"])]})),_:1}),Object(n["i"])(I,null,{default:a((function(){return[m,y,Object(n["i"])(G,{width:"150",height:"150",src:e.wechat},null,8,["src"])]})),_:1})]})),_:1})]})),_:1},8,["show","onClose"])])})),_=c("5530"),J=(c("e7e5"),c("d399")),C=(c("4de4"),c("159b"),c("a7ac")),N=c("e05b"),k=c("6c02"),G=c("5502"),I={name:"CreateOrder",setup:function(){var e=Object(k["d"])(),t=(Object(k["c"])(),Object(G["b"])()),c=Object(n["C"])({cartList:[],address:{},showPay:!1,orderNo:"",aliyun:"",wechat:""}),a=function(){J["a"].loading({message:"加载中...",forbidClick:!0}),Object(N["e"])().then((function(e){var t=e.address.filter((function(e){return"1"==e.is_default}));0==t.length?c.address={address:"还没有设置默认地址，请选择或者填写地址信息..."}:c.address=t[0],c.cartList=e.carts,J["a"].clear()}))};Object(n["v"])((function(){a()}));var r=function(){e.push({path:"/address"})},o=null,i=function(){var n={address_id:c.address.id};Object(N["b"])(n).then((function(n){Object(J["a"])("创建订单成功"),t.dispatch("updateCart"),c.showPay=!0,c.orderNo=n.id,console.log(c.orderNo),Object(N["f"])(c.orderNo,{type:"aliyun"}).then((function(e){c.aliyun=e.qr_code_url,c.wechat=e.qr_code_url})),o=setInterval((function(){Object(N["g"])(c.orderNo).then((function(t){"2"==t&&(clearInterval(o),e.push({path:"/orderdetail",query:{id:c.orderNo}}))}))}),2e3)}))},s=function(){clearInterval(o),e.push({path:"/orderdetail",query:{id:c.orderNo}})},d=Object(n["d"])((function(){var e=0;return c.cartList.forEach((function(t){e+=parseInt(t.num)*parseFloat(t.goods.price)})),e}));return Object(_["a"])(Object(_["a"])({},Object(n["K"])(c)),{},{goTo:r,handleCreateOrder:i,close:s,total:d})},components:{NavBar:C["a"]}};c("d228");I.render=w,I.__scopeId="data-v-b13df42c";t["default"]=I},b0c0:function(e,t,c){var n=c("83ab"),a=c("9bf2").f,r=Function.prototype,o=r.toString,i=/^\s*function ([^ (]*)/,s="name";n&&!(s in r)&&a(r,s,{configurable:!0,get:function(){try{return o.call(this).match(i)[1]}catch(e){return""}}})},d228:function(e,t,c){"use strict";c("3e32")}}]);
//# sourceMappingURL=chunk-80f4e856.317afb7b.js.map