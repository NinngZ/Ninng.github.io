(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-615c389e"],{"3f18":function(e,t,c){"use strict";c("d395")},bb51:function(e,t,c){"use strict";c.r(t);c("b0c0");var n=c("7a23"),a=Object(n["S"])("data-v-7d627974");Object(n["B"])("data-v-7d627974");var o=Object(n["h"])("商品分类"),i={id:"mainbox"},l={class:"ordertab"},u={class:"goodslist"},r={class:"content"};Object(n["z"])();var s=a((function(e,t,c,s,d,b){var O=Object(n["G"])("NavBar"),j=Object(n["G"])("van-tab"),f=Object(n["G"])("van-tabs"),v=Object(n["G"])("van-sidebar-item"),p=Object(n["G"])("van-collapse-item"),m=Object(n["G"])("van-collapse"),g=Object(n["G"])("van-sidebar"),h=Object(n["G"])("van-card"),k=Object(n["G"])("BackTop");return Object(n["y"])(),Object(n["f"])("div",null,[Object(n["i"])(O,null,{default:a((function(){return[o]})),_:1}),Object(n["i"])("div",i,[Object(n["i"])("div",l,[Object(n["i"])(f,{modelValue:s.active,"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.active=e}),onClick:s.tabClick},{default:a((function(){return[Object(n["i"])(j,{title:"销量排序"}),Object(n["i"])(j,{title:"价格排序"}),Object(n["i"])(j,{title:"评论排序"})]})),_:1},8,["modelValue","onClick"])]),Object(n["i"])("div",null,[Object(n["i"])(g,{class:"leftmenu",modelValue:s.activeKey,"onUpdate:modelValue":t[3]||(t[3]=function(e){return s.activeKey=e})},{default:a((function(){return[Object(n["i"])(m,{modelValue:s.activeNames,"onUpdate:modelValue":t[2]||(t[2]=function(e){return s.activeNames=e}),accordion:""},{default:a((function(){return[(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["E"])(s.categories,(function(e){return Object(n["y"])(),Object(n["f"])(p,{key:e.id+e.name,title:e.name,name:e.name},{default:a((function(){return[(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["E"])(e.children,(function(e){return Object(n["y"])(),Object(n["f"])(v,{key:e.id,title:e.name,onClick:function(t){return s.getGoods(e.id)}},null,8,["title","onClick"])})),128))]})),_:2},1032,["title","name"])})),128))]})),_:1},8,["modelValue"])]})),_:1},8,["modelValue"])]),Object(n["i"])("div",u,[Object(n["i"])("div",r,[(Object(n["y"])(!0),Object(n["f"])(n["a"],null,Object(n["E"])(s.showGoods,(function(e){return Object(n["y"])(),Object(n["f"])(h,{key:e.id,onClick:function(t){return s.itemClick(e.id)},num:e.sales,tag:e.comments_count>=2?"畅销":"一般",price:e.price,desc:e.updated_at,title:e.title,thumb:e.cover_url,"lazy-load":!0},null,8,["onClick","num","tag","price","desc","title","thumb"])})),128))])])]),Object(n["Q"])(Object(n["i"])(k,{onBTop:s.bTop},null,8,["onBTop"]),[[n["M"],s.isShowBackTop]])])})),d=c("2909"),b=c("a7ac"),O=c("725f"),j=c("1bab");function f(){return Object(j["a"])({url:"/api/goods"})}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sales",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Object(j["a"])({url:"/api/goods?category_id="+t+"&page="+c+"&"+e+"=1"})}var p=c("6c02"),m=c("f40f"),g={name:"Category",setup:function(){var e=Object(p["d"])(),t=Object(n["D"])(0),c=Object(n["D"])(1),a=Object(n["D"])([]),o=Object(n["C"])({}),i=Object(n["D"])(1),l=Object(n["D"])(!1),u=Object(n["D"])("sales"),r=Object(n["D"])(0),s=Object(n["C"])({sales:{page:1,list:[]},price:{page:1,list:[]},comments_count:{page:1,list:[]}}),b=Object(n["d"])((function(){return s[u.value].list})),O=function(){v("sales",r.value).then((function(e){s.sales.list=e.goods.data})),v("price",r.value).then((function(e){s.price.list=e.goods.data})),v("comments_count",r.value).then((function(e){s.comments_count.list=e.goods.data}))};Object(n["v"])((function(){f().then((function(e){a.value=e.categories})),O(),o=new m["a"](document.querySelector(".goodslist"),{prodeType:3,click:!0,pullUpLoad:!0}),o.on("scroll",(function(e){l.value=-e.y>300})),o.on("pullingUp",(function(){var e=s[u.value].page+1;v(u.value,r.value).then((function(e){var t;(t=s[u.value].list).push.apply(t,Object(d["a"])(e.goods.data)),s[u.value].page+=1})),o.finishPullUp(),Object(n["q"])((function(){o&&o.refresh()})),console.log("当前类型："+u.value+"当前页数："+e)}))}));var j=function(e){var t=["sales","price","comments_count"];u.value=t[e],v(u.value,r.value).then((function(e){s[u.value].list=e.goods.data,Object(n["q"])((function(){o&&o.refresh()}))}))},g=function(e){r.value=e,O()};Object(n["O"])((function(){Object(n["q"])((function(){o&&o.refresh()}))}));var h=function(){o.scrollTo(0,0,1e3)};return{activeKey:t,categories:a,activeNames:c,active:i,tabClick:j,currentOrder:u,currentCid:r,getGoods:g,goods:s,showGoods:b,bscroll:o,isShowBackTop:l,bTop:h,itemClick:function(t){return e.push({path:"/detail",query:{id:t}})}}},components:{NavBar:b["a"],BackTop:O["a"]}};c("3f18");g.render=s,g.__scopeId="data-v-7d627974";t["default"]=g},d395:function(e,t,c){}}]);
//# sourceMappingURL=chunk-615c389e.bc067383.js.map